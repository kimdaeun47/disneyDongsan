<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.boot.example.dao.SubjectDAO">

	<select id="subjectList" resultType="SubjectVO">
		select no, s_name, s_num from subject
		order by no
	</select>
	
	<select id="subjectNumber" resultType="String">
		select nvl(lpad(max(to_number(ltrim(s_num, '0')))+1,2,'0'), '01') as s_num
		from subject
	</select>
	
	<insert id="subjectInsert" parameterType="SubjectVO">
		insert into subject(no, s_num, s_name)
		values(subject_seq.nextval, #{s_num}, #{s_name})
	</insert>
	
	<update id="subjectUpdate" parameterType="SubjectVO">
		update subject set s_name = #{s_name}
		where no = #{no}
	</update>
	
	<delete id="subjectDelete" parameterType="SubjectVO">
		delete from subject where no = #{no}
	</delete>
	
	<select id="deleteCheck" parameterType="SubjectVO" resultType="SubjectVO">
		select no, s_num, deleteable
		from subjectselect
		where no = #{no}
	</select>
</mapper>